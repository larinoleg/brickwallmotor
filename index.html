<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="index.css">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
    </head>
    <body>
        <div class = 'title'>
            <h1 class = 'hTitle'>Стеностроительная фабрика</h1>
            <p class = 'pText'>Калькулятор: </p>
        </div>
            <div class="main">
                <form method="post" class="formClass">
                    <label>Кол-во красных кирпичей: <input name="redBricks" value="" class="redInputField"></label> 
                    <label>Кол-во синих кирпичей: <input name="blueBricks" value="" class="blueInputField"></label>
                    <input type="submit" value="Стереть стену" class="сlearButton">
                  </form>
                  <div class = 'error'>

                  </div>
            
                </div>
            <canvas id="canvas" class="canvas" width="620" height="10000"></canvas>
            <div class = 'canvas'> 
                <script>
                    const brickLegnth = 500;
                    //define canvas
                
                    const inputField = document.querySelector('.formClass');
                    const pErrorText = document.createElement('p');
                    pErrorText.classList.add('.pError');
                    const errorForm = document.querySelector('.error');
                    errorForm.prepend(pErrorText);
    
                    //event handler logic
                    inputField.addEventListener('input', (e) => {
                        const canvas = document.getElementById('canvas');
                        const ctx = canvas.getContext('2d');
                        ctx.fillStyle = '#FF3814'
                        ctx.lineWidth = 1;
                        ctx.strokeStyle = '#F5F5DC';
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        e.preventDefault();
                       
                        const redValue = document.querySelector('.redInputField').value;
                        const blueValue = document.querySelector('.blueInputField').value;
    
                        //error-handling
    
                        (isNaN(redValue) || isNaN(blueValue) || (redValue < 0 || blueValue < 0)) ? 
                        pErrorText.innerText = 'Ошибка. Введеное значение не является числом или меньше 0.': 
                        pErrorText.innerText = '';
                        let x = 0;
                        let y = 10;
                        let k = 0;
                        const width = 20;
                        const height = 10;
                        
                        for (let i = 1; i <= redValue; i++) {
                            const randomNumber = Math.floor(Math.random()*500);
                            randomNumber === 25 ? ctx.fillStyle = '#cc2b0e' : ctx.fillStyle = '#FF3814';
                            // i % 2 == 0 ? ctx.fillStyle = 'red' : ctx.fillStyle = 'blue';
                            if (x > brickLegnth) {
                                (k++) % 2 == 0 ? x = 0 - width/2 : x = 0;
                                y += height + 2;
                                ctx.fillRect(x, y, width, height);
                                ctx.strokeRect(x, y, width, height);
                            }
                            else {ctx.fillRect(x, y, width, height);
                                ctx.strokeRect(x, y, width, height)}
                            
                            x += width+ 2; 
                        }
                        
    
                        for (let v = 1; v <= blueValue; v++) {
                            const randomNumber = Math.floor(Math.random()*500);
                            randomNumber === 23 ? ctx.fillStyle = '#1174bf' : 
                            ctx.fillStyle = '#1891ED';
                            if (x > brickLegnth) {
                                (k++) % 2 == 0 ? x = 0 - width/2 : x = 0;
                                y += height + 2;
                                ctx.fillRect(x, y, width, height);
                                ctx.strokeRect(x, y, width, height);
                            }
                            else {ctx.fillRect(x, y, width, height);
                                ctx.strokeRect(x, y, width, height)}
                            
                            x += width+ 2; 
                        }
                       
                    })
                    //clear logic
    
                    const clearButton = document.querySelector('.сlearButton');
                    clearButton.addEventListener('click', (e) => {
                        e.preventDefault();
                        const canvas = document.getElementById('canvas');
                        const ctx = canvas.getContext('2d');
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        pErrorText.innerText = '';
                    })

                    //suggested values input fields
                        // const redInput = document.querySelector('.redInputField');
                        // redInput.addEventListener('input', () => {
                        //     document.querySelector('.blueInputField').value = redInput.value;
                        // });     
                </script>
            </div>
            
            
        </div>
        
    </body>
</html>